(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"7sQm":function(l,n,e){"use strict";e.r(n);var t=e("8Y7J");class a{}var s=e("pMnS"),u=e("5D71"),o=e("rbVQ"),r=e("CqYc"),i=e("u+Mh"),c=e("OuSF"),h=e("d7Ac"),b=e("qzbh");class d{constructor(l,n,e,t,a,s,u,o,r,i){this.router=l,this.route=n,this.auth=e,this.cripto=t,this.workflow=a,this.guard=s,this.obser=u,this.translate=o,this.postMessagesService=r,this.deviceService=i,this.otp=this.route.snapshot.paramMap.get("otp"),this.translate.setDefaultLang("es-CR")}ngOnInit(){this.obser.sendData({title:"event::delete_token",data:"event---delete_token"},h.n),this.auth.deleteAllTokenData(),this.auth.authenticate(this.otp).subscribe(l=>{if(this.obser.sendData({title:"event::authenticate_response",data:`event---${JSON.stringify(l)}`},h.n),l.state!==h.A){const n={},e=this.auth.decodeToken(l.access_token);this.obser.sendData({title:"event::tokenDecodedFinish",data:"event---finish"},h.n),this.isDesktopDevice||this.appReady().subscribe(l=>{l&&(n.uuidDispositivo=l.uuidDevice,n.parametrosContexto={idAplicacion:l.commonsParamsRequest.appId},n.sistemaOperativo=l.os,n.tipoEnrolamiento=l.enrollmentType)}),this.cripto.getKeysRemote().then(t=>{this.cripto.keyCreator().then(t=>{console.log(e);const a=e.product;this.auth.saveTokenData(l,e.sub,this.saveLocalStorage(a)),this.obser.sendData({title:"event::tokenDecoded.sub",data:`event---${e.sub}`},h.n),this.guard.sendData(a,h.w),n.llaveEncriptacion=JSON.stringify(t),this.workflow.workflow(h.k,n)}).catch(l=>{this.obser.sendData({title:"event::error_crypto_create",data:`event---${JSON.stringify(l)}`},h.n)})}).catch(l=>{this.obser.sendData({title:"event::error_crypto_remote_key",data:`event---${l}`},h.n)})}else this.router.navigate(["/forbidden"])})}saveLocalStorage(l){switch(l){case"CAM_CO":case"TMA_CO":return!0;case"BIO_CO":return!1;default:return!0}}appReady(){return this.obser.sendData(!1,h.d),this.postMessagesService.appReady(),this.obser.getData(h.d)}get isDesktopDevice(){return this.deviceService.isDesktop()}}var p=e("iInd"),v=e("TSSN"),_=e("ARm4"),k=t.mb({encapsulation:0,styles:[u.a],data:{}});function m(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,12,"div",[["class","contentBox contentBox__alignment--centerCenter"]],null,null,null,null,null)),(l()(),t.ob(1,0,null,null,5,"div",[["class","clockLoader"]],null,null,null,null,null)),(l()(),t.ob(2,0,null,null,0,"span",[["class","clockLoader__center"]],null,null,null,null,null)),(l()(),t.ob(3,0,null,null,0,"span",[["class","clockLoader__numeral"]],null,null,null,null,null)),(l()(),t.ob(4,0,null,null,0,"span",[["class","clockLoader__numeral clockLoader__numeral--horizontal"]],null,null,null,null,null)),(l()(),t.ob(5,0,null,null,0,"span",[["class","clockLoader__numeral clockLoader__numeral--lateralRight"]],null,null,null,null,null)),(l()(),t.ob(6,0,null,null,0,"span",[["class","clockLoader__numeral clockLoader__numeral--lateralLeft"]],null,null,null,null,null)),(l()(),t.ob(7,0,null,null,1,"h2",[["class","text__color--primary text__align--center"]],null,null,null,null,null)),(l()(),t.Gb(-1,null,[" Conectando "])),(l()(),t.ob(9,0,null,null,3,"h3",[["class","text__align--center"]],null,null,null,null,null)),(l()(),t.Gb(-1,null,[" Por favor espera "])),(l()(),t.ob(11,0,null,null,0,"br",[],null,null,null,null,null)),(l()(),t.ob(12,0,null,null,0,"br",[],null,null,null,null,null))],null,null)}function w(l){return t.Ib(0,[(l()(),t.ob(0,0,null,null,1,"app-initial",[],null,null,null,m,k)),t.nb(1,114688,null,0,d,[p.k,p.a,o.a,r.a,i.a,c.a,c.a,v.i,b.a,_.b],null,null)],function(l,n){l(n,1,0)},null)}var g=t.kb("app-initial",d,w,{},{},[]),D=e("SVse"),f=e("IheW"),y=e("CFIy"),S=e("bHSK");class L{}e.d(n,"InitialModuleNgFactory",function(){return C});var C=t.lb(a,[],function(l){return t.vb([t.wb(512,t.j,t.Z,[[8,[s.a,g]],[3,t.j],t.v]),t.wb(4608,D.p,D.o,[t.s,[2,D.x]]),t.wb(4608,i.a,i.a,[c.a,c.a,c.a,c.a,p.k,f.c,r.a,o.a,y.a,S.a,b.a]),t.wb(4608,_.b,_.b,[t.z]),t.wb(1073742336,D.b,D.b,[]),t.wb(1073742336,p.l,p.l,[[2,p.r],[2,p.k]]),t.wb(1073742336,L,L,[]),t.wb(1073742336,a,a,[]),t.wb(1024,p.i,function(){return[[{path:":otp",component:d}]]},[])])})}}]);